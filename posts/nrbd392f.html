<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Hướng dẫn chạy lại base pipeline | Blog's GluTis</title><meta name="author" content="GluTis,huyv80313@gmail.com"><meta name="copyright" content="GluTis"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="FFFAFA"><meta name="description" content="My tasks viết doc về cái repository đã chạy ( framework deploy web là gì, cách thức lưu dữ liệu như nào, nói chung là người hiểu rõ nhất về nó ), các ae còn lại phải git clone và chạy lại được nó. Lin">
<meta property="og:type" content="article">
<meta property="og:title" content="Hướng dẫn chạy lại base pipeline">
<meta property="og:url" content="https://huyvu15.github.io/posts/nrbd392f">
<meta property="og:site_name" content="Blog&#39;s GluTis">
<meta property="og:description" content="My tasks viết doc về cái repository đã chạy ( framework deploy web là gì, cách thức lưu dữ liệu như nào, nói chung là người hiểu rõ nhất về nó ), các ae còn lại phải git clone và chạy lại được nó. Lin">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.xenonstack.com/hubfs/xenonstack-machine-learning-pipeline.png">
<meta property="article:published_time" content="2024-07-23T00:35:12.000Z">
<meta property="article:modified_time" content="2024-08-11T04:20:21.713Z">
<meta property="article:author" content="GluTis">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="Prepare">
<meta property="article:tag" content="Documentation">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.xenonstack.com/hubfs/xenonstack-machine-learning-pipeline.png"><link rel="shortcut icon" href="/img/about/icon.jpg"><link rel="canonical" href="https://huyvu15.github.io/posts/nrbd392f"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//www.clarity.ms"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="G2rPpjA8qhdAQYUqgC3WTFeaOfenZ71SWXKcg_WnOSk"/><meta name="baidu-site-verification" content="codeva-z19ndifHai"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?204a6d3bb0cb0e09978eff5ba3023104";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "kmd11rvmc3");</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: {"limitDay":30,"position":"top","messagePrev":"Bài viết này đã có","messageNext":"Ngày không cập nhật, xin lưu ý phân biệt tính kịp thời, có thể một phần đã không còn hiệu lực."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hướng dẫn chạy lại base pipeline',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-11 11:20:21'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'FFFAFA')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/card-info-btn.css"><script data-pjax charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script data-pjax>LA.init({id:"3HPYFt9znqKItrHZ",ck:"3HPYFt9znqKItrHZ",autoTrack:true})</script><link rel="stylesheet" type="text/css" href="/css/Capoo.css"><link rel="stylesheet" type="text/css" href="/css/foot.css"><link rel="stylesheet" type="text/css" href="/css/extra.css"><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="Blog's GluTis" type="application/atom+xml">
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/about/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">135</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">76</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/#/"><i class="fa-fw fas fa-home"></i><span> Trang chủ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tag</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-pencil"></i><span> Project</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/posts/1n6d313f/"><i class="fa-fw fa fa-arrow-up"></i><span> Nhận thông báo chi tiêu từ shopee</span></a></li><li><a class="site-page child" href="/posts/123ofe2/"><i class="fa-fw fa fa-arrow-down"></i><span> Tạo ChatBot trên Telegram</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://huyvu15.click/"><i class="fa-fw fas fa-map"></i><span> Điều hướng</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://www.xenonstack.com/hubfs/xenonstack-machine-learning-pipeline.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Blog's GluTis"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/about/icon.jpg"/><span class="site-name">Blog's GluTis</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/#/"><i class="fa-fw fas fa-home"></i><span> Trang chủ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tag</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-pencil"></i><span> Project</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/posts/1n6d313f/"><i class="fa-fw fa fa-arrow-up"></i><span> Nhận thông báo chi tiêu từ shopee</span></a></li><li><a class="site-page child" href="/posts/123ofe2/"><i class="fa-fw fa fa-arrow-down"></i><span> Tạo ChatBot trên Telegram</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://huyvu15.click/"><i class="fa-fw fas fa-map"></i><span> Điều hướng</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Hướng dẫn chạy lại base pipeline<a class="post-edit-link" href="https://github.com/huyvu15/huyvu15.github.io/tree/main/source/_posts/run_pipeline_AIChangllengeHCMC.md" title="Edited on" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-07-23T00:35:12.000Z" title="Created 2024-07-23 07:35:12">2024-07-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-08-11T04:20:21.713Z" title="Updated 2024-08-11 11:20:21">2024-08-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/AI/">AI</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">1.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>9mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Hướng dẫn chạy lại base pipeline"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="my-tasks">My tasks</h1>
<p>viết doc về cái repository đã chạy ( framework deploy web là gì, cách thức lưu dữ liệu như nào, nói chung là người hiểu rõ nhất về nó ), các ae còn lại phải git clone và chạy lại được nó.</p>
<p>Link repo: <a target="_blank" rel="noopener" href="https://github.com/anminhhung/Pipeline_HCM_AI">HERE</a></p>
<blockquote>
<p>Đi kèm với giới thiệu repo tại đây<br>
Tên:<br>
Mục đích:<br>
Công nghệ sử dụng:</p>
</blockquote>
<h1 id="mục-đích-của-repository">Mục đích của repository</h1>
<p>Repository này chứa mã nguồn của một ứng dụng web sử dụng Flask để triển khai và cung cấp các chức năng tìm kiếm hình ảnh dựa trên văn bản và hình ảnh.<br>
Mang lại cái nhìn bức tranh tổng quát về những gì sắp tới mình sẽ làm phát triển repo lên thành một hướng mới.<br>
→ <code>Mục tiêu sau cùng là có báo.</code></p>
<h2 id="input-output">Input &amp; Output</h2>
<ul>
<li><strong>Input:</strong> Đưa vào câu prompt và file</li>
<li><strong>Output:</strong> Các ảnh có độ tương đồng lớn nhất với câu prompt</li>
</ul>
<h2 id="những-chức-năng-chính-của-ứng-dụng">Những chức năng chính của ứng dụng:</h2>
<ul>
<li>Hiển thị hình ảnh dạng thumbnail.</li>
<li>Tìm kiếm hình ảnh dựa trên hình ảnh đầu vào.</li>
<li>Tìm kiếm hình ảnh dựa trên văn bản đầu vào.</li>
</ul>
<h1 id="các-framework-sử-dụng">Các framework sử dụng</h1>
<ul>
<li>Framework deploy web: Flask</li>
</ul>
<p>Các công nghệ và thư viện liên quan:</p>
<ul>
<li>OpenCV: Thư viện xử lý ảnh.</li>
<li>FAISS: Thư viện tìm kiếm vector hiệu quả.</li>
<li>HTML và Jinja2: Sử dụng để render giao diện người dùng.</li>
</ul>
<h1 id="cách-lưu-dữ-liệu">Cách lưu dữ liệu</h1>
<h1 id="hướng-dẫn-clone-và-chạy-lại">Hướng dẫn clone và chạy lại</h1>
<p>Cài đặt Python (phiên bản 3.x &gt;= 3.10).<br>
Cài đặt các công cụ cần thiết: Git, pip.<br>
Clone repo từ github</p>
<ol>
<li>Clone repository theo cú pháp dưới:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/anminhhung/Pipeline_HCM_AI</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Tại folder vừa clone tiến hành cài các thư viện cần thiết</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requirement.txt</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>Chạy file app</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py app.py</span><br></pre></td></tr></table></figure>
<h1 id="cấu-trúc-thư-mục-và-tệp-tin">Cấu trúc Thư mục và Tệp Tin</h1>
<p><strong><a target="_blank" rel="noopener" href="http://app.py">app.py</a>:</strong> Tệp chính chứa mã nguồn của ứng dụng Flask. (<a target="_blank" rel="noopener" href="http://demo.py">demo.py</a> để gen csdl đường dẫn đến cái file ảnh)</p>
<p><strong>images/:</strong> Chứa các hình ảnh được sử dụng trong dự án.</p>
<p><strong>myEnv/:</strong> Chứa các tài nguyên và môi trường ảo cần thiết cho dự án.</p>
<ul>
<li>
<p>bin/: Chứa các tệp thực thi của môi trường ảo.</p>
</li>
<li>
<p>share/doc/networkx-3.1/examples/: Chứa các ví dụ liên quan đến thư viện networkx.</p>
</li>
<li>
<p>3d_drawing/, algorithms/, basic/, drawing/, graph/, subclass/:</p>
</li>
<li>
<p>man/man1/: Chứa tài liệu hướng dẫn sử dụng.</p>
</li>
</ul>
<p><strong>static/:</strong> Chứa các tệp tĩnh như CSS, JavaScript, và hình ảnh.</p>
<ul>
<li>
<p>css/: Chứa các tệp CSS để định dạng giao diện người dùng.</p>
</li>
<li>
<p>images/: Chứa các hình ảnh tĩnh.</p>
</li>
<li>
<p>js/: Chứa các tệp JavaScript để xử lý các tác vụ phía client.</p>
</li>
</ul>
<p><strong>templates/:</strong> Chứa các tệp HTML để render giao diện người dùng.</p>
<p><strong>utils/:</strong> Chứa các mô-đun hỗ trợ cho ứng dụng, như query_processing và faiss.</p>
<h2 id="gói-faiss">Gói faiss:</h2>
<p>load_bin_file(self, bin_file)</p>
<ul>
<li>Đọc tệp chỉ mục FAISS từ đường dẫn bin_file và trả về chỉ mục FAISS.</li>
</ul>
<p>show_images(self, image_paths)</p>
<ul>
<li>Hiển thị các hình ảnh từ danh sách image_paths bằng Matplotlib.</li>
</ul>
<p>image_search(self, id_query, k)</p>
<ul>
<li>Tìm kiếm hình ảnh dựa trên id_query (ID của hình ảnh truy vấn) và số lượng kết quả k.</li>
<li>Trả về điểm số, ID hình ảnh, thông tin hình ảnh và đường dẫn hình ảnh.</li>
</ul>
<p>text_search(self, text, k)</p>
<ul>
<li>Tìm kiếm hình ảnh dựa trên văn bản text và số lượng kết quả k.</li>
<li>Nếu văn bản là tiếng Việt, dịch nó sang tiếng Anh.</li>
<li>Mã hóa văn bản bằng mô hình CLIP.</li>
<li>Tìm kiếm trong chỉ mục FAISS và trả về điểm số, ID hình ảnh, thông tin hình ảnh và đường dẫn hình ảnh.</li>
</ul>
<h2 id="gói-query-processing">Gói query_processing:</h2>
<h3 id="lớp-translation">Lớp Translation</h3>
<ol>
<li><strong>init</strong>(self, from_lang=‘vi’, to_lang=‘en’, mode=‘google’)</li>
</ol>
<ul>
<li>Khởi tạo đối tượng Translation với các tham số:</li>
</ul>
<ul>
<li>from_lang: Ngôn ngữ gốc (mặc định là tiếng Việt).</li>
<li>to_lang: Ngôn ngữ đích (mặc định là tiếng Anh).</li>
<li>mode: Chế độ dịch, có thể là ‘googletrans’ hoặc ‘translate’.</li>
</ul>
<ul>
<li>Thiết lập bộ dịch (translator) dựa trên chế độ đã chọn.</li>
</ul>
<ol start="2">
<li>preprocessing(self, text)</li>
</ol>
<ul>
<li>Tiền xử lý văn bản bằng cách chuyển đổi tất cả ký tự thành chữ thường.</li>
</ul>
<ol start="3">
<li><strong>call</strong>(self, text)</li>
</ol>
<ul>
<li>Tiền xử lý văn bản.</li>
<li>Dịch văn bản sử dụng bộ dịch đã thiết lập.</li>
<li>Trả về văn bản đã dịch.</li>
</ul>
<h2 id="lớp-text-preprocessing">Lớp Text_Preprocessing</h2>
<ol>
<li><strong>init</strong>(self, stopwords_path=’./dict/vietnamese-stopwords-dash.txt’)</li>
</ol>
<ul>
<li>Khởi tạo đối tượng Text_Preprocessing và tải danh sách từ dừng từ tệp.</li>
</ul>
<ol start="2">
<li>find_substring(self, string1, string2)</li>
</ol>
<ul>
<li>Tìm chuỗi con dài nhất chung giữa string1 và string2 bằng cách sử dụng SequenceMatcher.</li>
</ul>
<ol start="3">
<li>remove_stopwords(self, text)</li>
</ol>
<ul>
<li>Loại bỏ các từ dừng khỏi văn bản text đã được tách từ bằng ViTokenizer.</li>
</ul>
<ol start="4">
<li>lowercasing(self, text)</li>
</ol>
<ul>
<li>Chuyển đổi tất cả ký tự trong văn bản thành chữ thường.</li>
</ul>
<ol start="5">
<li>uppercasing(self, text)</li>
</ol>
<ul>
<li>Chuyển đổi tất cả ký tự trong văn bản thành chữ hoa.</li>
</ul>
<ol start="6">
<li>add_accents(self, text)</li>
</ol>
<ul>
<li>Thêm dấu cho văn bản text bằng ViUtils.add_accents.</li>
</ul>
<ol start="7">
<li>remove_accents(self, text)</li>
</ol>
<ul>
<li>Loại bỏ dấu trong văn bản text bằng ViUtils.remove_accents.</li>
</ul>
<ol start="8">
<li>sentence_segment(self, text)</li>
</ol>
<ul>
<li>Phân đoạn câu trong văn bản text bằng underthesea.sent_tokenize.</li>
</ul>
<ol start="9">
<li>text_norm(self, text)</li>
</ol>
<ul>
<li>Chuẩn hóa văn bản text bằng underthesea.text_normalize.</li>
</ul>
<ol start="10">
<li>text_classify(self, text)</li>
</ol>
<ul>
<li>Phân loại văn bản text bằng underthesea.classify.</li>
</ul>
<ol start="11">
<li>sentiment_analysis(self, text)</li>
</ol>
<ul>
<li>Phân tích cảm xúc của văn bản text bằng underthesea.sentiment.</li>
</ul>
<ol start="12">
<li><strong>call</strong>(self, text)</li>
</ol>
<ul>
<li>Thực hiện các bước tiền xử lý: chuyển thành chữ thường, loại bỏ từ dừng, chuẩn hóa văn bản.</li>
<li>Phân loại văn bản và trả về kết quả phân loại.</li>
</ul>
<h1 id="chi-tiết-về-cơ-sở-dữ-liệu">Chi Tiết về Cơ Sở Dữ Liệu</h1>
<p>5.1. Loại Cơ Sở Dữ Liệu</p>
<ul>
<li>Không sử dụng cơ sở dữ liệu truyền thống, thay vào đó, dữ liệu hình ảnh được lưu trữ dưới dạng tệp và thông tin đường dẫn được lưu trong tệp JSON (image_path.json).</li>
</ul>
<p>5.2. Cấu hình và Mô Tả</p>
<ul>
<li>image_path.json: Chứa các đường dẫn đến hình ảnh được map với các id tương ứng.</li>
<li>faiss_normal_ViT.bin: Tệp nhị phân chứa index FAISS cho việc tìm kiếm vector.</li>
</ul>
<h1 id="hướng-dẫn-deployment">Hướng dẫn Deployment</h1>
<p>Deploy lên AWS [… Đang…]</p>
<h1 id="các-lưu-ý-khác">Các Lưu Ý Khác</h1>
<p>Những lưu ý quan trọng khi làm việc với repository này</p>
<p>Các vấn đề thường gặp và cách khắc phục</p>
<h1 id="hướng-phát-triển">Hướng phát triển</h1>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://huyvu15.github.io">GluTis</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://huyvu15.github.io/posts/nrbd392f">https://huyvu15.github.io/posts/nrbd392f</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/AI/">AI</a><a class="post-meta__tags" href="/tags/Prepare/">Prepare</a><a class="post-meta__tags" href="/tags/Documentation/">Documentation</a></div><div class="post_share"><div class="social-share" data-image="https://www.xenonstack.com/hubfs/xenonstack-machine-learning-pipeline.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>Sponsor</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/money/wechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/money/wechat.png" alt="bank"/></a><div class="post-qr-code-desc">bank</div></li><li class="reward-item"><a href="/img/money/alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/money/alipay.png" alt="bank"/></a><div class="post-qr-code-desc">bank</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/jjjj392f" title="Nghệ thuật quản lý thời gian"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://maisonoffice.vn/wp-content/uploads/2023/08/ky-nang-quan-ly-thoi-gian-3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">Nghệ thuật quản lý thời gian</div></div></a></div><div class="next-post pull-right"><a href="/posts/0t4e2927" title="Khóa học đàm phán thành công, các chiến lược và kỹ năng thiết yếu"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hiu.vn/wp-content/uploads/2020/08/NEGOTIATION-SKILL.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">Khóa học đàm phán thành công, các chiến lược và kỹ năng thiết yếu</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/posts/1r6d393f" title="AI và một vài cái hay ho"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vbpo.com.vn/media/uploads/2021/05/27/ai-la-gi.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-30</div><div class="title">AI và một vài cái hay ho</div></div></a></div><div><a href="/posts/2r3d326f" title="Những thử thách gặp phải trong dự án Detect License Plate"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://d3i71xaburhd42.cloudfront.net/956a55d67a95509b5babfec73b0329cf936fd261/2-Figure1-1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-12</div><div class="title">Những thử thách gặp phải trong dự án Detect License Plate</div></div></a></div><div><a href="/posts/1r6c393f" title="Kĩ thuật Transfer Learning và Fineturning Learning"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://media.licdn.com/dms/image/C5612AQGjSQYL10w5cg/article-cover_image-shrink_600_2000/0/1589871047792?e=2147483647&v=beta&t=8TX2avemVBdHTrbRIsJvSjtpr-JU5QEc8Jqnn-N2kuU" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-30</div><div class="title">Kĩ thuật Transfer Learning và Fineturning Learning</div></div></a></div><div><a href="/posts/1r6d39fff" title="Tìm lại kiến thức trong tháng 8"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://clipground.com/images/august-clipart-11.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-08</div><div class="title">Tìm lại kiến thức trong tháng 8</div></div></a></div><div><a href="/posts/1rcc393f" title="Keyframe - Trái Tim của Nội Dung Video"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://media.springernature.com/lw685/springer-static/image/art%3A10.1007%2Fs11042-023-15829-5/MediaObjects/11042_2023_15829_Fig4_HTML.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-10</div><div class="title">Keyframe - Trái Tim của Nội Dung Video</div></div></a></div><div><a href="/posts/rrg1393f" title="Tăng cường ảnh"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lh5.googleusercontent.com/_o71PRbnVBW6NDW9MKpdktv2YqaTkYe4bZyzjG6s7LSauXv6Egizh9834Efe3g7KkOxDwQmjlPX0lWuEJ8HsydAir3eATQJKz4yh2lxO3apvx2p92lXhYBqbm7Jb4L1smuYL0fcJ9Y_TR1CHpWb2z5mSJ_sWDQ1k6cJRYqnWJaTWwDHOHobDCGUUGg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-01</div><div class="title">Tăng cường ảnh</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#my-tasks"><span class="toc-number">1.</span> <span class="toc-text">My tasks</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#m%E1%BB%A5c-%C4%91%C3%ADch-c%E1%BB%A7a-repository"><span class="toc-number">2.</span> <span class="toc-text">Mục đích của repository</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#input-output"><span class="toc-number">2.1.</span> <span class="toc-text">Input &amp; Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nh%E1%BB%AFng-ch%E1%BB%A9c-n%C4%83ng-ch%C3%ADnh-c%E1%BB%A7a-%E1%BB%A9ng-d%E1%BB%A5ng"><span class="toc-number">2.2.</span> <span class="toc-text">Những chức năng chính của ứng dụng:</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#c%C3%A1c-framework-s%E1%BB%AD-d%E1%BB%A5ng"><span class="toc-number">3.</span> <span class="toc-text">Các framework sử dụng</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#c%C3%A1ch-l%C6%B0u-d%E1%BB%AF-li%E1%BB%87u"><span class="toc-number">4.</span> <span class="toc-text">Cách lưu dữ liệu</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-clone-v%C3%A0-ch%E1%BA%A1y-l%E1%BA%A1i"><span class="toc-number">5.</span> <span class="toc-text">Hướng dẫn clone và chạy lại</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#c%E1%BA%A5u-tr%C3%BAc-th%C6%B0-m%E1%BB%A5c-v%C3%A0-t%E1%BB%87p-tin"><span class="toc-number">6.</span> <span class="toc-text">Cấu trúc Thư mục và Tệp Tin</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#g%C3%B3i-faiss"><span class="toc-number">6.1.</span> <span class="toc-text">Gói faiss:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#g%C3%B3i-query-processing"><span class="toc-number">6.2.</span> <span class="toc-text">Gói query_processing:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#l%E1%BB%9Bp-translation"><span class="toc-number">6.2.1.</span> <span class="toc-text">Lớp Translation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#l%E1%BB%9Bp-text-preprocessing"><span class="toc-number">6.3.</span> <span class="toc-text">Lớp Text_Preprocessing</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chi-ti%E1%BA%BFt-v%E1%BB%81-c%C6%A1-s%E1%BB%9F-d%E1%BB%AF-li%E1%BB%87u"><span class="toc-number">7.</span> <span class="toc-text">Chi Tiết về Cơ Sở Dữ Liệu</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#h%C6%B0%E1%BB%9Bng-d%E1%BA%ABn-deployment"><span class="toc-number">8.</span> <span class="toc-text">Hướng dẫn Deployment</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#c%C3%A1c-l%C6%B0u-%C3%BD-kh%C3%A1c"><span class="toc-number">9.</span> <span class="toc-text">Các Lưu Ý Khác</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#h%C6%B0%E1%BB%9Bng-ph%C3%A1t-tri%E1%BB%83n"><span class="toc-number">10.</span> <span class="toc-text">Hướng phát triển</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By GluTis</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="Chat"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const abcjsInit = () => {
    const abcjsFn = () => {
      document.querySelectorAll(".abc-music-sheet").forEach(ele => {
        ABCJS.renderAbc(ele, ele.innerHTML, {responsive: 'resize'})
      })
    }
    
    typeof ABCJS === 'object' ? abcjsFn()
      : getScript('https://cdn.jsdelivr.net/npm/abcjs@6.3.0/dist/abcjs-basic-min.min.js').then(abcjsFn)
  }

  window.pjax ? abcjsInit() : window.addEventListener('load', abcjsInit)
})()</script><script>(()=>{
  const getGiscusTheme = theme => {
    return theme === 'dark' ? 'dark' : 'light'
  }

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.app/client.js',
      'data-repo': 'huyvu15/huyvu15.github.io',
      'data-repo-id': 'R_kgDOMHLk0w',
      'data-category-id': 'DIC_kwDOMHLk084CgTi9',
      'data-mapping': 'pathname',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },{"data-category":"Show and tell","data-mapping":"url","data-strict":0,"data-reactions-enabled":1,"data-emit-metadata":1,"data-input-position":"top","data-theme":"preferred_color_scheme","data-lang":"en","crossorigin":"anonymous"})

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const sendMessage = message => {
      const iframe = document.querySelector('iframe.giscus-frame')
      if (!iframe) return
      iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app')
    }

    sendMessage({
      setConfig: {
        theme: getGiscusTheme(theme)
      }
    });
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Giscus' === 'Giscus' || !true) {
    if (true) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment= loadGiscus
  }
})()</script></div><script data-pjax src="/js/foot.js"></script><script data-pjax src="/js/ip.js"></script><script data-pjax src="/js/Capoo.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script>(() => {
  const isChatBtn = true
  const isChatHideShow = true

  if (isChatBtn) {
    const close = () => {
      Chatra('minimizeWidget')
      Chatra('hide')
    }

    const open = () => {
      Chatra('openChat', true)
      Chatra('show')
    }

    window.ChatraSetup = {
      startHidden: true
    }
  
    window.chatBtnFn = () => {
      const isShow = document.getElementById('chatra').classList.contains('chatra--expanded')
      isShow ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        Chatra('hide')
      },
      show: () => {
        Chatra('show')
      }
    }
  }

  (function(d, w, c) {
    w.ChatraID = 'odrCmotXiknn7yHdF'
    var s = d.createElement('script')
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments)
    }
    s.async = true
    s.src = 'https://call.chatra.io/chatra.js'
    if (d.head) d.head.appendChild(s)
  })(document, window, 'Chatra')

})()</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["link[rel=\"canonical\"]","meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>